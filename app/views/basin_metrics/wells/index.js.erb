
var focusPartial = "<%= j(render partial: 'basin_metrics/dashboard/focus_pane') %>";
var listPartial = "<%= j(render partial: 'basin_metrics/dashboard/list_pane') %>";
var indexFocusPartial = "<%= j(render partial: 'focus_index', locals: { wells: JSON.parse(@wells) }) %>";
var indexListPartial = "<%= j(render partial: 'list_index', locals: { wells: JSON.parse(@wells) }) %>";

// clear and build main pane
$('.main_pane').html(focusPartial).append(listPartial);
$('.list_pane').html(indexListPartial);
$('.focus_pane').html(indexFocusPartial);

condenseText();

var confirmation_success = "<%=j(flash.now[:success])%>";
var confirmation_error = "<%=j(flash.now[:error])%>";

if (confirmation_success != '') {
  $.notify({
    message: "<%=j(flash.now[:success])%>"
  },{
    type: 'success'
  });
}
if (confirmation_error != '') {
  $.notify({
    message: "<%=j(flash.now[:error])%>"
  },{
    type: 'danger'
  });
}

function condenseText() {
//  debugger;
  var comment = $('.comment');
  if (comment.text().length > 30){
    var shortened = comment.text();
    shortened = shortened.substring(0,20);
    comment.text(shortened + "...");
  }
}